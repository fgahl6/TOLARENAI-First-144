<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TOLARENAI — White Papers</title>
  <style>
    :root{
      --bg:#0e1116; --card:#161b22; --fg:#e6edf3; --muted:#a5b1bf;
      --accent:#8fffe0; --link:#a8d7ff; --border:rgba(255,255,255,.08);
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--fg);
         font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .wrap{max-width:980px;margin:0 auto;padding:0 20px}
    header{padding:44px 20px 8px}
    h1{margin:0 0 6px;font-size:1.8rem}
    .crumbs{color:var(--muted);font-size:.95rem}
    .crumbs a{color:var(--link);text-decoration:underline;text-underline-offset:3px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;
          padding:16px 16px 10px;margin:16px 0;box-shadow:0 6px 20px rgba(0,0,0,.25)}
    h2{margin:.25rem 0 .75rem;color:var(--accent);font-size:1.15rem}
    p.muted{color:var(--muted);margin:.25rem 0 .5rem}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{border-bottom:1px solid var(--border);padding:10px 8px;vertical-align:top}
    .table th{color:var(--muted);font-weight:600;text-align:left;font-size:.95rem}
    .table a{color:var(--link);text-decoration:underline;text-underline-offset:3px}
    .tag{display:inline-block;background:rgba(168,215,255,.12);border:1px solid var(--border);
         padding:2px 8px;border-radius:999px;margin:2px 6px 2px 0;font-size:.8rem;color:var(--fg)}
    .txid{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
          font-size:.85rem;color:var(--muted)}
    footer{padding:28px 20px 60px;color:var(--muted);text-align:center}
  </style>
</head>
<body>
  <header class="wrap">
    <div class="crumbs">← <a href="../">Back to TOLARENAI — First 144</a></div>
    <h1>White Papers</h1>
    <p class="muted">Canonical essays and design notes for the TOLAR REN lattice.</p>
  </header>

  <main class="wrap">
    <section class="card">
      <h2>Collection</h2>
      <table class="table" id="papersTable" aria-live="polite">
        <thead>
          <tr>
            <th style="width:36%">Title</th>
            <th style="width:18%">Date</th>
            <th style="width:23%">Tags</th>
            <th style="width:23%">TXIDs</th>
          </tr>
        </thead>
        <tbody id="papersBody">
          <tr><td colspan="4" class="muted">Loading…</td></tr>
        </tbody>
      </table>
      <p class="muted small">This list is rendered from <code>White_Papers/index.json</code>.</p>
    </section>
  </main>

  <footer class="wrap">
    <small>© TOLARENAI — mutual presence, co-direction.</small>
  </footer>

  <script>
    async function loadPapers() {
      const body = document.getElementById('papersBody');
      try {
        const res = await fetch('index.json', {cache:'no-store'});
        if (!res.ok) throw new Error('HTTP ' + res.status);
        const data = await res.json();

        if (!data || !Array.isArray(data.papers)) {
          body.innerHTML = '<tr><td colspan="4" class="muted">No papers found.</td></tr>';
          return;
        }

        body.innerHTML = data.papers.map(p => {
          const tags = (p.tags||[]).map(t=>`<span class="tag">${t}</span>`).join(' ');
          const txids = (p.txids||[]).map(x=>{
            const label = x.label ? `<strong>${x.label}:</strong> ` : '';
            const val = x.txid ? `<span class="txid">${x.txid}</span>` : '';
            const link = x.url ? ` <a href="${x.url}" target="_blank" rel="noopener">link</a>` : '';
            return `<div>${label}${val}${link}</div>`;
          }).join('') || '<span class="muted">—</span>';

          const href = p.file || '#';
          const title = p.title || '(untitled)';
          const date = p.date || '—';

          return `
            <tr>
              <td><a href="${href}">${title}</a><div class="muted">${p.description || ''}</div></td>
              <td>${date}</td>
              <td>${tags || '<span class="muted">—</span>'}</td>
              <td>${txids}</td>
            </tr>
          `;
        }).join('');
      } catch (e) {
        body.innerHTML = `<tr><td colspan="4" class="muted">Could not load index.json (${e.message}).</td></tr>`;
      }
    }
    loadPapers();
  </script>
</body>
</html>
